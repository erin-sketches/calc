var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(t,e,n){t.$$.on_destroy.push(c(e,n))}function s(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function p(){return h(" ")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}let y;function x(t){y=t}const v=[],w=[],C=[],_=[],k=Promise.resolve();let O=!1;function A(t){C.push(t)}let N=!1;const E=new Set;function F(){if(!N){N=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];x(e),L(e.$$)}for(x(null),v.length=0;w.length;)w.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];E.has(e)||(E.add(e),e())}C.length=0}while(v.length);for(;_.length;)_.pop()();O=!1,N=!1,E.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const S=new Set;function T(t,e){t&&t.i&&(S.delete(t),t.i(e))}function P(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),undefined.c.push((()=>{S.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function j(t){t&&t.c()}function z(t,n,l,c){const{fragment:a,on_mount:s,on_destroy:i,after_update:u}=t.$$;a&&a.m(n,l),c||A((()=>{const n=s.map(e).filter(o);i?i.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(A)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(v.push(t),O||(O=!0,k.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(e,o,l,c,a,s,i,f=[-1]){const d=y;x(e);const h=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};i&&i(h.root);let p=!1;if(h.ctx=l?l(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&H(e,t)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();o.intro&&T(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),F()}x(d)}class K{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const M=[];function G(e,n=t){let r;const o=new Set;function c(t){if(l(e,t)&&(e=t,r)){const t=!M.length;for(const t of o)t[1](),M.push(t,e);if(t){for(let t=0;t<M.length;t+=2)M[t][0](M[t+1]);M.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(l,a=t){const s=[l,a];return o.add(s),1===o.size&&(r=n(c)||t),l(e),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}function q(e,n,l){const a=!Array.isArray(e),s=a?[e]:e,i=n.length<2;return{subscribe:G(l,(e=>{let l=!1;const u=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(a?u[0]:u,e);i?e(r):d=o(r)?r:t},p=s.map(((t,e)=>c(t,(t=>{u[e]=t,f&=~(1<<e),l&&h()}),(()=>{f|=1<<e}))));return l=!0,h(),function(){r(p),d()}})).subscribe}}function D(t,e){return e}function J(t,e){localStorage.setItem(e,JSON.stringify(t))}const W=G(D(0,[{desc:"Nasoya extra firm tofu",name:"tofu",cal:80,gram:85,protein:8,fat:5,carb:2},{desc:"White onions, raw",name:"onions (white)",cal:36,gram:100,protein:.89,fat:.13,carb:7.68},{desc:"Gala apple",name:"apple (gala)",cal:61,gram:100,protein:.13,fat:.15,carb:14.8},{desc:"Calories (uncategorized)",name:"calories",cal:1,gram:1,protein:0,fat:0,carb:0},{desc:"Peanut butter (Skippy, creamy)",name:"peanut butter (creamy)",cal:190,gram:32,protein:7,fat:16,carb:6},{desc:"Hoisin (Lee Kum Kee)",name:"hoisin",cal:90,gram:42,protein:0,fat:0,carb:21},{desc:"Cucumber",name:"cucumber",cal:15,gram:100,protein:.65,fat:.11,carb:3.63},{desc:"Oil (1 tbsp = 13.63 g)",name:"oil",cal:884,gram:100,protein:0,fat:100,carb:0},{desc:"Garlic",name:"garlic",cal:143,gram:100,protein:6.62,fat:.38,carb:28.2},{desc:"Kale",name:"kale",cal:43,gram:100,protein:2.92,fat:1.49,carb:4.42},{desc:"Tomato",name:"tomato",cal:22,gram:100,protein:.7,fat:.42,carb:3.84},{desc:"Better Than Boullion paste (1 tsp = 6g)",name:"better than boullion stock",cal:10,gram:6,protein:0,fat:0,carb:2}]));W.subscribe((t=>J(t,"itemDb")));const X=q(W,(t=>{const e={};for(let n of t)e[n.name]=n;return e})),Q=G(D(0,[]));Q.subscribe((t=>J(t,"activeItems")));const R=q([X,Q],(([t,e])=>{console.log("totalstats",t,e);return e.reduce(((e,n)=>{const{name:r,amt:o}=n;if(!t[r])return e;const l=t[r],c=Number(o)/l.gram;return{cal:e.cal+l.cal*c,protein:e.protein+l.protein*c,fat:e.fat+l.fat*c,carb:e.carb+l.carb*c}}),{cal:0,gram:0,protein:0,fat:0,carb:0})}));function U(t,e,n){const r=t.slice();return r[2]=e[n],r}function V(t,e,n){const r=t.slice();return r[5]=e[n],r}function Y(t){let e,n,r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"";return{c(){e=d("th"),n=h(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){1&e&&r!==(r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"")&&b(n,r)},d(t){t&&u(e)}}}function Z(t){let e,n,r,o,l,c,a,g,m=t[2].desc+"",$=(t[2].cal/t[2].gram).toFixed(3)+"",y=t[1],x=[];for(let e=0;e<y.length;e+=1)x[e]=Y(V(t,y,e));return{c(){e=d("tr"),n=d("th"),r=h(m),o=p(),l=d("th"),c=h($),a=p();for(let t=0;t<x.length;t+=1)x[t].c();g=p()},m(t,u){i(t,e,u),s(e,n),s(n,r),s(e,o),s(e,l),s(l,c),s(e,a);for(let t=0;t<x.length;t+=1)x[t].m(e,null);s(e,g)},p(t,n){if(1&n&&m!==(m=t[2].desc+"")&&b(r,m),1&n&&$!==($=(t[2].cal/t[2].gram).toFixed(3)+"")&&b(c,$),3&n){let r;for(y=t[1],r=0;r<y.length;r+=1){const o=V(t,y,r);x[r]?x[r].p(o,n):(x[r]=Y(o),x[r].c(),x[r].m(e,g))}for(;r<x.length;r+=1)x[r].d(1);x.length=y.length}},d(t){t&&u(e),f(x,t)}}}function tt(e){let n,r,o,l,c=e[0],a=[];for(let t=0;t<c.length;t+=1)a[t]=Z(U(e,c,t));return{c(){n=d("table"),r=d("thead"),r.innerHTML="<tr><th>Name</th> \n            <th>Cals / g</th> \n            <th>Protein (g)</th> \n            <th>Fat (g)</th> \n            <th>Carbs (g)</th></tr>",o=p(),l=d("tbody");for(let t=0;t<a.length;t+=1)a[t].c();m(n,"class","table table-striped")},m(t,e){i(t,n,e),s(n,r),s(n,o),s(n,l);for(let t=0;t<a.length;t+=1)a[t].m(l,null)},p(t,[e]){if(3&e){let n;for(c=t[0],n=0;n<c.length;n+=1){const r=U(t,c,n);a[n]?a[n].p(r,e):(a[n]=Z(r),a[n].c(),a[n].m(l,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=c.length}},i:t,o:t,d(t){t&&u(n),f(a,t)}}}function et(t,e,n){let r;a(t,W,(t=>n(0,r=t)));return[r,["protein","fat","carb"]]}class nt extends K{constructor(t){super(),I(this,t,et,tt,l,{})}}function rt(t,e,n){const r=t.slice();return r[11]=e[n],r}function ot(t){let e,n=t[4],r=[];for(let e=0;e<n.length;e+=1)r[e]=lt(rt(t,n,e));return{c(){e=d("ul");for(let t=0;t<r.length;t+=1)r[t].c();m(e,"class","list-group opts svelte-wwylds")},m(t,n){i(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(30&o){let l;for(n=t[4],l=0;l<n.length;l+=1){const c=rt(t,n,l);r[l]?r[l].p(c,o):(r[l]=lt(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(t){t&&u(e),f(r,t)}}}function lt(t){let e,n,r,o,l=t[11].text+"";function c(){return t[8](t[11])}return{c(){e=d("li"),n=h(l),m(e,"class","list-group-item")},m(t,l){i(t,e,l),s(e,n),r||(o=g(e,"click",c),r=!0)},p(e,r){t=e,16&r&&l!==(l=t[11].text+"")&&b(n,l)},d(t){t&&u(e),r=!1,o()}}}function ct(e){let n,l,c,a,f,h=e[3]&&ot(e);return{c(){n=d("div"),l=d("input"),c=p(),h&&h.c(),m(l,"type","text"),m(l,"class","form-control"),m(l,"placeholder",e[0])},m(t,r){i(t,n,r),s(n,l),$(l,e[2]),s(n,c),h&&h.m(n,null),a||(f=[g(l,"input",e[6]),g(l,"focus",e[7]),g(l,"change",(function(){o(e[1](e[2]))&&e[1](e[2]).apply(this,arguments)})),g(n,"blur",e[9]),g(n,"focus",e[10])],a=!0)},p(t,[r]){e=t,1&r&&m(l,"placeholder",e[0]),4&r&&l.value!==e[2]&&$(l,e[2]),e[3]?h?h.p(e,r):(h=ot(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:t,o:t,d(t){t&&u(n),h&&h.d(),a=!1,r(f)}}}function at(t,e,n){let r,{placeholder:o}=e,{allOpts:l}=e,{onChange:c}=e,a="",s=!1;return t.$$set=t=>{"placeholder"in t&&n(0,o=t.placeholder),"allOpts"in t&&n(5,l=t.allOpts),"onChange"in t&&n(1,c=t.onChange)},t.$$.update=()=>{36&t.$$.dirty&&n(4,r=l.filter((t=>t.name.toLowerCase().includes(a.toLowerCase()))))},[o,c,a,s,r,l,function(){a=this.value,n(2,a)},()=>n(3,s=!0),t=>{c(t.name),n(2,a=t.name),n(3,s=!1)},()=>n(3,s=!1),()=>n(3,s=!0)]}class st extends K{constructor(t){super(),I(this,t,at,ct,l,{placeholder:0,allOpts:5,onChange:1})}}function it(t,e,n){const r=t.slice();return r[16]=e[n],r}function ut(t,e,n){const r=t.slice();return r[16]=e[n],r}function ft(t){let e,n,r,o,l,c,a,f,p=t[16].name+"",$=t[16].amt+"";function y(){return t[14](t[16])}return{c(){e=d("li"),n=d("button"),n.textContent="X",r=h(p),o=h(" ("),l=h($),c=h(" g) "),m(n,"class","btn btn-danger"),m(e,"class","list-group-item")},m(t,u){i(t,e,u),s(e,n),s(e,r),s(e,o),s(e,l),s(e,c),a||(f=g(n,"click",y),a=!0)},p(e,n){t=e,32&n&&p!==(p=t[16].name+"")&&b(r,p),32&n&&$!==($=t[16].amt+"")&&b(l,$)},d(t){t&&u(e),a=!1,f()}}}function dt(t){let e,n,r=(t[1][t[16]]?t[1][t[16]].toFixed(3):"N/A")+"";return{c(){e=d("th"),n=h(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){2&e&&r!==(r=(t[1][t[16]]?t[1][t[16]].toFixed(3):"N/A")+"")&&b(n,r)},d(t){t&&u(e)}}}function ht(t){let e,n,o,l,c,a,h,b,y,x,v,w,C,_,k,O,A,N,E,F,L,S,H,I,K,M,G,q,D,J,W,X,Q,R,U,V;h=new st({props:{placeholder:"Ingredient",allOpts:t[4],onChange:t[12]}});let Y=t[5],Z=[];for(let e=0;e<Y.length;e+=1)Z[e]=ft(ut(t,Y,e));let tt=t[6],et=[];for(let e=0;e<tt.length;e+=1)et[e]=dt(it(t,tt,e));return{c(){e=d("div"),n=d("div"),o=d("h5"),o.textContent="Add ingredients + weight",l=p(),c=d("div"),a=d("div"),j(h.$$.fragment),b=p(),y=d("div"),x=d("input"),v=p(),w=d("div"),C=d("button"),C.textContent="Add",_=p(),k=d("div"),O=d("div"),A=d("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();N=p(),E=d("div"),F=d("div"),L=d("div"),S=d("div"),H=d("h5"),H.textContent="Current stats:",I=p(),K=d("h6"),K.textContent="Set total weight",M=p(),G=d("input"),q=p(),D=d("table"),J=d("thead"),J.innerHTML="<tr><th>Cals / g</th> \n                            <th>Protein (g)</th> \n                            <th>Fat (g)</th> \n                            <th>Carbs (g)</th></tr>",W=p(),X=d("tbody"),Q=d("tr");for(let t=0;t<et.length;t+=1)et[t].c();m(o,"class","card-header"),m(a,"class","col-lg-4"),m(x,"type","text"),m(x,"class","form-control"),m(x,"placeholder","Amount, g"),m(y,"class","col-lg-2"),m(C,"type","button"),m(C,"class","btn btn-primary"),m(w,"class","col-lg-2"),m(c,"class","row"),m(n,"class","card-body"),m(A,"class","list-group opts"),m(O,"class","col"),m(k,"class","row"),m(e,"class","card"),m(H,"class","card-header"),m(G,"type","text"),m(G,"placeholder","Total dish amount, g"),m(D,"class","table table-striped"),m(S,"class","col"),m(L,"class","row"),m(F,"class","card-body"),m(E,"class","card")},m(r,u){i(r,e,u),s(e,n),s(n,o),s(n,l),s(n,c),s(c,a),z(h,a,null),s(c,b),s(c,y),s(y,x),$(x,t[2]),s(c,v),s(c,w),s(w,C),s(e,_),s(e,k),s(k,O),s(O,A);for(let t=0;t<Z.length;t+=1)Z[t].m(A,null);i(r,N,u),i(r,E,u),s(E,F),s(F,L),s(L,S),s(S,H),s(S,I),s(S,K),s(S,M),s(S,G),$(G,t[0]),s(S,q),s(S,D),s(D,J),s(D,W),s(D,X),s(X,Q);for(let t=0;t<et.length;t+=1)et[t].m(Q,null);R=!0,U||(V=[g(x,"input",t[13]),g(C,"click",t[7]),g(G,"input",t[15])],U=!0)},p(t,[e]){const n={};if(16&e&&(n.allOpts=t[4]),8&e&&(n.onChange=t[12]),h.$set(n),4&e&&x.value!==t[2]&&$(x,t[2]),288&e){let n;for(Y=t[5],n=0;n<Y.length;n+=1){const r=ut(t,Y,n);Z[n]?Z[n].p(r,e):(Z[n]=ft(r),Z[n].c(),Z[n].m(A,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=Y.length}if(1&e&&G.value!==t[0]&&$(G,t[0]),66&e){let n;for(tt=t[6],n=0;n<tt.length;n+=1){const r=it(t,tt,n);et[n]?et[n].p(r,e):(et[n]=dt(r),et[n].c(),et[n].m(Q,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}},i(t){R||(T(h.$$.fragment,t),R=!0)},o(t){P(h.$$.fragment,t),R=!1},d(t){t&&u(e),B(h),f(Z,t),t&&u(N),t&&u(E),f(et,t),U=!1,r(V)}}}function pt(t,e,n){let r,o,l,c,s,i;a(t,R,(t=>n(10,c=t))),a(t,W,(t=>n(11,s=t))),a(t,Q,(t=>n(5,i=t)));let u="",f="",d=0;function h(t){Q.update((e=>{const n=[...e],r=n.map((t=>t.name)).indexOf(t);return n.splice(r,1),n}))}return t.$$.update=()=>{2048&t.$$.dirty&&n(4,r=s.map((t=>({name:t.name,text:t.name})))),1&t.$$.dirty&&n(9,o=Number(d)),1536&t.$$.dirty&&n(1,l={cal:c.cal/o,protein:c.protein/o,fat:c.fat/o,carb:c.carb/o}),1538&t.$$.dirty&&console.log(o,l,c)},[d,l,u,f,r,i,["cal","protein","fat","carb"],function(){u&&f&&(Q.update((t=>t.concat({name:f,amt:u}))),n(2,u=""))},h,o,c,s,t=>{n(3,f=t)},function(){u=this.value,n(2,u)},t=>h(t.name),function(){d=this.value,n(0,d)}]}class gt extends K{constructor(t){super(),I(this,t,pt,ht,l,{})}}function mt(e){let n,r,o,l,c,a,f,h,g,m,b;return r=new gt({}),m=new nt({}),{c(){n=d("main"),j(r.$$.fragment),o=p(),l=d("br"),c=p(),a=d("hr"),f=p(),h=d("br"),g=p(),j(m.$$.fragment)},m(t,e){i(t,n,e),z(r,n,null),s(n,o),s(n,l),s(n,c),s(n,a),s(n,f),s(n,h),s(n,g),z(m,n,null),b=!0},p:t,i(t){b||(T(r.$$.fragment,t),T(m.$$.fragment,t),b=!0)},o(t){P(r.$$.fragment,t),P(m.$$.fragment,t),b=!1},d(t){t&&u(n),B(r),B(m)}}}return new class extends K{constructor(t){super(),I(this,t,null,mt,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
