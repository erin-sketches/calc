var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function a(t,n,e){t.$$.on_destroy.push(c(n,e))}function s(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function p(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function b(t,n){t.value=null==n?"":n}let y;function x(t){y=t}const v=[],w=[],_=[],C=[],A=Promise.resolve();let N=!1;function k(t){_.push(t)}let O=!1;const E=new Set;function F(){if(!O){O=!0;do{for(let t=0;t<v.length;t+=1){const n=v[t];x(n),L(n.$$)}for(x(null),v.length=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];E.has(n)||(E.add(n),n())}_.length=0}while(v.length);for(;C.length;)C.pop()();N=!1,O=!1,E.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const S=new Set;function T(t,n){t&&t.i&&(S.delete(t),t.i(n))}function j(t,n,e,r){if(t&&t.o){if(S.has(t))return;S.add(t),undefined.c.push((()=>{S.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function I(t){t&&t.c()}function M(t,e,l,c){const{fragment:a,on_mount:s,on_destroy:u,after_update:i}=t.$$;a&&a.m(e,l),c||k((()=>{const e=s.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]})),i.forEach(k)}function P(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function z(t,n){-1===t.$$.dirty[0]&&(v.push(t),N||(N=!0,A.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function H(n,o,l,c,a,s,u,f=[-1]){const d=y;x(n);const h=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:e(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};u&&u(h.root);let g=!1;if(h.ctx=l?l(n,o.props||{},((t,e,...r)=>{const o=r.length?r[0]:e;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),g&&z(n,t)),e})):[],h.update(),g=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();o.intro&&T(n.$$.fragment),M(n,o.target,o.anchor,o.customElement),F()}x(d)}class q{$destroy(){P(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const B=[];function D(n,e=t){let r;const o=new Set;function c(t){if(l(n,t)&&(n=t,r)){const t=!B.length;for(const t of o)t[1](),B.push(t,n);if(t){for(let t=0;t<B.length;t+=2)B[t][0](B[t+1]);B.length=0}}}return{set:c,update:function(t){c(t(n))},subscribe:function(l,a=t){const s=[l,a];return o.add(s),1===o.size&&(r=e(c)||t),l(n),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}function G(n,e,l){const a=!Array.isArray(n),s=a?[n]:n,u=e.length<2;return{subscribe:D(l,(n=>{let l=!1;const i=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=e(a?i[0]:i,n);u?n(r):d=o(r)?r:t},g=s.map(((t,n)=>c(t,(t=>{i[n]=t,f&=~(1<<n),l&&h()}),(()=>{f|=1<<n}))));return l=!0,h(),function(){r(g),d()}})).subscribe}}function J(t,n){return n}function W(t,n){localStorage.setItem(n,JSON.stringify(t))}const K=D(J(0,[{desc:"Nasoya extra firm tofu",name:"tofu",cal:80,gram:85,protein:8,fat:5,carb:2},{desc:"White onions, raw",name:"onions (white)",cal:36,gram:100,protein:.89,fat:.13,carb:7.68},{desc:"Gala apple",name:"apple (gala)",cal:61,gram:100,protein:.13,fat:.15,carb:14.8}]));K.subscribe((t=>W(t,"itemDb")));const Q=G(K,(t=>{const n={};for(let e of t)n[e.name]=e;return n})),R=D(J(0,[]));R.subscribe((t=>W(t,"activeItems")));const U=G([Q,R],(([t,n])=>{console.log("totalstats",t,n);return n.reduce(((n,e)=>{const{name:r,amt:o}=e;if(!t[r])return n;const l=t[r],c=Number(o)/l.gram;return{cal:n.cal+l.cal*c,protein:n.protein+l.protein*c,fat:n.fat+l.fat*c,carb:n.carb+l.carb*c}}),{cal:0,gram:0,protein:0,fat:0,carb:0})}));function V(t,n,e){const r=t.slice();return r[2]=n[e],r}function X(t,n,e){const r=t.slice();return r[5]=n[e],r}function Y(t){let n,e,r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"";return{c(){n=d("th"),e=h(r)},m(t,r){u(t,n,r),s(n,e)},p(t,n){1&n&&r!==(r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"")&&$(e,r)},d(t){t&&i(n)}}}function Z(t){let n,e,r,o,l,c,a,p,m=t[2].desc+"",b=(t[2].cal/t[2].gram).toFixed(3)+"",y=t[1],x=[];for(let n=0;n<y.length;n+=1)x[n]=Y(X(t,y,n));return{c(){n=d("tr"),e=d("th"),r=h(m),o=g(),l=d("th"),c=h(b),a=g();for(let t=0;t<x.length;t+=1)x[t].c();p=g()},m(t,i){u(t,n,i),s(n,e),s(e,r),s(n,o),s(n,l),s(l,c),s(n,a);for(let t=0;t<x.length;t+=1)x[t].m(n,null);s(n,p)},p(t,e){if(1&e&&m!==(m=t[2].desc+"")&&$(r,m),1&e&&b!==(b=(t[2].cal/t[2].gram).toFixed(3)+"")&&$(c,b),3&e){let r;for(y=t[1],r=0;r<y.length;r+=1){const o=X(t,y,r);x[r]?x[r].p(o,e):(x[r]=Y(o),x[r].c(),x[r].m(n,p))}for(;r<x.length;r+=1)x[r].d(1);x.length=y.length}},d(t){t&&i(n),f(x,t)}}}function tt(n){let e,r,o,l,c=n[0],a=[];for(let t=0;t<c.length;t+=1)a[t]=Z(V(n,c,t));return{c(){e=d("table"),r=d("thead"),r.innerHTML="<tr><th>Name</th> \n            <th>Cals / g</th> \n            <th>Protein (g)</th> \n            <th>Fat (g)</th> \n            <th>Carbs (g)</th></tr>",o=g(),l=d("tbody");for(let t=0;t<a.length;t+=1)a[t].c();m(e,"class","table table-striped")},m(t,n){u(t,e,n),s(e,r),s(e,o),s(e,l);for(let t=0;t<a.length;t+=1)a[t].m(l,null)},p(t,[n]){if(3&n){let e;for(c=t[0],e=0;e<c.length;e+=1){const r=V(t,c,e);a[e]?a[e].p(r,n):(a[e]=Z(r),a[e].c(),a[e].m(l,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}},i:t,o:t,d(t){t&&i(e),f(a,t)}}}function nt(t,n,e){let r;a(t,K,(t=>e(0,r=t)));return[r,["protein","fat","carb"]]}class et extends q{constructor(t){super(),H(this,t,nt,tt,l,{})}}function rt(t,n,e){const r=t.slice();return r[11]=n[e],r}function ot(t){let n,e=t[4],r=[];for(let n=0;n<e.length;n+=1)r[n]=lt(rt(t,e,n));return{c(){n=d("ul");for(let t=0;t<r.length;t+=1)r[t].c();m(n,"class","list-group opts svelte-wwylds")},m(t,e){u(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,o){if(30&o){let l;for(e=t[4],l=0;l<e.length;l+=1){const c=rt(t,e,l);r[l]?r[l].p(c,o):(r[l]=lt(c),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=e.length}},d(t){t&&i(n),f(r,t)}}}function lt(t){let n,e,r,o,l=t[11].text+"";function c(){return t[8](t[11])}return{c(){n=d("li"),e=h(l),m(n,"class","list-group-item")},m(t,l){u(t,n,l),s(n,e),r||(o=p(n,"click",c),r=!0)},p(n,r){t=n,16&r&&l!==(l=t[11].text+"")&&$(e,l)},d(t){t&&i(n),r=!1,o()}}}function ct(n){let e,l,c,a,f,h=n[3]&&ot(n);return{c(){e=d("div"),l=d("input"),c=g(),h&&h.c(),m(l,"type","text"),m(l,"class","form-control"),m(l,"placeholder",n[0])},m(t,r){u(t,e,r),s(e,l),b(l,n[2]),s(e,c),h&&h.m(e,null),a||(f=[p(l,"input",n[6]),p(l,"focus",n[7]),p(l,"change",(function(){o(n[1](n[2]))&&n[1](n[2]).apply(this,arguments)})),p(e,"blur",n[9]),p(e,"focus",n[10])],a=!0)},p(t,[r]){n=t,1&r&&m(l,"placeholder",n[0]),4&r&&l.value!==n[2]&&b(l,n[2]),n[3]?h?h.p(n,r):(h=ot(n),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:t,o:t,d(t){t&&i(e),h&&h.d(),a=!1,r(f)}}}function at(t,n,e){let r,{placeholder:o}=n,{allOpts:l}=n,{onChange:c}=n,a="",s=!1;return t.$$set=t=>{"placeholder"in t&&e(0,o=t.placeholder),"allOpts"in t&&e(5,l=t.allOpts),"onChange"in t&&e(1,c=t.onChange)},t.$$.update=()=>{36&t.$$.dirty&&e(4,r=l.filter((t=>t.name.toLowerCase().includes(a.toLowerCase()))))},[o,c,a,s,r,l,function(){a=this.value,e(2,a)},()=>e(3,s=!0),t=>{c(t.name),e(2,a=t.name),e(3,s=!1)},()=>e(3,s=!1),()=>e(3,s=!0)]}class st extends q{constructor(t){super(),H(this,t,at,ct,l,{placeholder:0,allOpts:5,onChange:1})}}function ut(t,n,e){const r=t.slice();return r[14]=n[e],r}function it(t,n,e){const r=t.slice();return r[14]=n[e],r}function ft(t){let n,e,r,o,l,c=t[14].name+"",a=t[14].amt+"";return{c(){n=d("li"),e=h(c),r=h(" ("),o=h(a),l=h(" g)"),m(n,"class","list-group-item")},m(t,c){u(t,n,c),s(n,e),s(n,r),s(n,o),s(n,l)},p(t,n){32&n&&c!==(c=t[14].name+"")&&$(e,c),32&n&&a!==(a=t[14].amt+"")&&$(o,a)},d(t){t&&i(n)}}}function dt(t){let n,e,r=(t[1][t[14]]?t[1][t[14]].toFixed(3):"N/A")+"";return{c(){n=d("th"),e=h(r)},m(t,r){u(t,n,r),s(n,e)},p(t,n){2&n&&r!==(r=(t[1][t[14]]?t[1][t[14]].toFixed(3):"N/A")+"")&&$(e,r)},d(t){t&&i(n)}}}function ht(t){let n,e,o,l,c,a,h,$,y,x,v,w,_,C,A,N,k,O,E,F,L,S,z,H,q,B,D,G,J,W,K,Q,R,U,V,X;h=new st({props:{placeholder:"Ingredient",allOpts:t[4],onChange:t[11]}});let Y=t[5],Z=[];for(let n=0;n<Y.length;n+=1)Z[n]=ft(it(t,Y,n));let tt=t[6],nt=[];for(let n=0;n<tt.length;n+=1)nt[n]=dt(ut(t,tt,n));return{c(){n=d("div"),e=d("div"),o=d("h5"),o.textContent="Add ingredients + weight",l=g(),c=d("div"),a=d("div"),I(h.$$.fragment),$=g(),y=d("div"),x=d("input"),v=g(),w=d("div"),_=d("button"),_.textContent="Add",C=g(),A=d("div"),N=d("div"),k=d("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();O=g(),E=d("div"),F=d("div"),L=d("div"),S=d("div"),z=d("h5"),z.textContent="Current stats:",H=g(),q=d("h6"),q.textContent="Set total weight",B=g(),D=d("input"),G=g(),J=d("table"),W=d("thead"),W.innerHTML="<tr><th>Cals / g</th> \n                            <th>Protein (g)</th> \n                            <th>Fat (g)</th> \n                            <th>Carbs (g)</th></tr>",K=g(),Q=d("tbody"),R=d("tr");for(let t=0;t<nt.length;t+=1)nt[t].c();m(o,"class","card-header"),m(a,"class","col-lg-4"),m(x,"type","text"),m(x,"class","form-control"),m(x,"placeholder","Amount, g"),m(y,"class","col-lg-2"),m(_,"type","button"),m(_,"class","btn btn-primary"),m(w,"class","col-lg-2"),m(c,"class","row"),m(e,"class","card-body"),m(k,"class","list-group opts"),m(N,"class","col"),m(A,"class","row"),m(n,"class","card"),m(z,"class","card-header"),m(D,"type","text"),m(D,"placeholder","Total dish amount, g"),m(J,"class","table table-striped"),m(S,"class","col"),m(L,"class","row"),m(F,"class","card-body"),m(E,"class","card")},m(r,i){u(r,n,i),s(n,e),s(e,o),s(e,l),s(e,c),s(c,a),M(h,a,null),s(c,$),s(c,y),s(y,x),b(x,t[2]),s(c,v),s(c,w),s(w,_),s(n,C),s(n,A),s(A,N),s(N,k);for(let t=0;t<Z.length;t+=1)Z[t].m(k,null);u(r,O,i),u(r,E,i),s(E,F),s(F,L),s(L,S),s(S,z),s(S,H),s(S,q),s(S,B),s(S,D),b(D,t[0]),s(S,G),s(S,J),s(J,W),s(J,K),s(J,Q),s(Q,R);for(let t=0;t<nt.length;t+=1)nt[t].m(R,null);U=!0,V||(X=[p(x,"input",t[12]),p(_,"click",t[7]),p(D,"input",t[13])],V=!0)},p(t,[n]){const e={};if(16&n&&(e.allOpts=t[4]),8&n&&(e.onChange=t[11]),h.$set(e),4&n&&x.value!==t[2]&&b(x,t[2]),32&n){let e;for(Y=t[5],e=0;e<Y.length;e+=1){const r=it(t,Y,e);Z[e]?Z[e].p(r,n):(Z[e]=ft(r),Z[e].c(),Z[e].m(k,null))}for(;e<Z.length;e+=1)Z[e].d(1);Z.length=Y.length}if(1&n&&D.value!==t[0]&&b(D,t[0]),66&n){let e;for(tt=t[6],e=0;e<tt.length;e+=1){const r=ut(t,tt,e);nt[e]?nt[e].p(r,n):(nt[e]=dt(r),nt[e].c(),nt[e].m(R,null))}for(;e<nt.length;e+=1)nt[e].d(1);nt.length=tt.length}},i(t){U||(T(h.$$.fragment,t),U=!0)},o(t){j(h.$$.fragment,t),U=!1},d(t){t&&i(n),P(h),f(Z,t),t&&i(O),t&&i(E),f(nt,t),V=!1,r(X)}}}function gt(t,n,e){let r,o,l,c,s,u;a(t,U,(t=>e(9,c=t))),a(t,K,(t=>e(10,s=t))),a(t,R,(t=>e(5,u=t)));let i="",f="None",d=0;return t.$$.update=()=>{1024&t.$$.dirty&&e(4,r=s.map((t=>({name:t.name,text:t.name})))),1&t.$$.dirty&&e(8,o=Number(d)),768&t.$$.dirty&&e(1,l={cal:c.cal/o,protein:c.protein/o,fat:c.fat/o,carb:c.carb/o}),770&t.$$.dirty&&console.log(o,l,c)},[d,l,i,f,r,u,["cal","protein","fat","carb"],function(){R.update((t=>t.concat({name:f,amt:i})))},o,c,s,t=>{e(3,f=t)},function(){i=this.value,e(2,i)},function(){d=this.value,e(0,d)}]}class pt extends q{constructor(t){super(),H(this,t,gt,ht,l,{})}}function mt(n){let e,r,o,l,c,a,f,h,p,m,$;return r=new pt({}),m=new et({}),{c(){e=d("main"),I(r.$$.fragment),o=g(),l=d("br"),c=g(),a=d("hr"),f=g(),h=d("br"),p=g(),I(m.$$.fragment)},m(t,n){u(t,e,n),M(r,e,null),s(e,o),s(e,l),s(e,c),s(e,a),s(e,f),s(e,h),s(e,p),M(m,e,null),$=!0},p:t,i(t){$||(T(r.$$.fragment,t),T(m.$$.fragment,t),$=!0)},o(t){j(r.$$.fragment,t),j(m.$$.fragment,t),$=!1},d(t){t&&i(e),P(r),P(m)}}}return new class extends q{constructor(t){super(),H(this,t,null,mt,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
