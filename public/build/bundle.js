var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(t,e,n){t.$$.on_destroy.push(c(e,n))}function s(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function m(){return h(" ")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}let x;function v(t){x=t}const w=[],C=[],_=[],k=[],O=Promise.resolve();let A=!1;function N(t){_.push(t)}let S=!1;const E=new Set;function F(){if(!S){S=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];v(e),L(e.$$)}for(v(null),w.length=0;C.length;)C.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];E.has(e)||(E.add(e),e())}_.length=0}while(w.length);for(;k.length;)k.pop()();A=!1,S=!1,E.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const T=new Set;function I(t,e){t&&t.i&&(T.delete(t),t.i(e))}function P(t,e,n,r){if(t&&t.o){if(T.has(t))return;T.add(t),undefined.c.push((()=>{T.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function j(t){t&&t.c()}function z(t,n,l,c){const{fragment:a,on_mount:s,on_destroy:i,after_update:u}=t.$$;a&&a.m(n,l),c||N((()=>{const n=s.map(e).filter(o);i?i.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(N)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(w.push(t),A||(A=!0,O.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,o,l,c,a,s,i,f=[-1]){const d=x;v(e);const h=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};i&&i(h.root);let m=!1;if(h.ctx=l?l(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),m&&H(e,t)),n})):[],h.update(),m=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();o.intro&&I(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),F()}v(d)}class M{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const D=[];function G(e,n=t){let r;const o=new Set;function c(t){if(l(e,t)&&(e=t,r)){const t=!D.length;for(const t of o)t[1](),D.push(t,e);if(t){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(l,a=t){const s=[l,a];return o.add(s),1===o.size&&(r=n(c)||t),l(e),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}function J(e,n,l){const a=!Array.isArray(e),s=a?[e]:e,i=n.length<2;return{subscribe:G(l,(e=>{let l=!1;const u=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(a?u[0]:u,e);i?e(r):d=o(r)?r:t},m=s.map(((t,e)=>c(t,(t=>{u[e]=t,f&=~(1<<e),l&&h()}),(()=>{f|=1<<e}))));return l=!0,h(),function(){r(m),d()}})).subscribe}}function q(t,e){const n=localStorage.getItem(t);return n?JSON.parse(n):e}function W(t,e){localStorage.setItem(e,JSON.stringify(t))}const X=G(q("itemDb",[{desc:"Nasoya extra firm tofu",name:"tofu",cal:80,gram:85,protein:8,fat:5,carb:2},{desc:"White onions, raw",name:"onions (white)",cal:36,gram:100,protein:.89,fat:.13,carb:7.68},{desc:"Gala apple",name:"apple (gala)",cal:61,gram:100,protein:.13,fat:.15,carb:14.8},{desc:"Calories (uncategorized)",name:"calories",cal:1,gram:1,protein:0,fat:0,carb:0},{desc:"Peanut butter (Skippy, creamy)",name:"peanut butter (creamy)",cal:190,gram:32,protein:7,fat:16,carb:6},{desc:"Hoisin (Lee Kum Kee)",name:"hoisin",cal:90,gram:42,protein:0,fat:0,carb:21},{desc:"Cucumber",name:"cucumber",cal:15,gram:100,protein:.65,fat:.11,carb:3.63},{desc:"Oil (1 tbsp = 13.63 g)",name:"oil",cal:884,gram:100,protein:0,fat:100,carb:0},{desc:"Garlic",name:"garlic",cal:143,gram:100,protein:6.62,fat:.38,carb:28.2},{desc:"Kale",name:"kale",cal:43,gram:100,protein:2.92,fat:1.49,carb:4.42},{desc:"Tomato",name:"tomato",cal:22,gram:100,protein:.7,fat:.42,carb:3.84},{desc:"Better Than Boullion paste (1 tsp = 6g)",name:"better than boullion stock",cal:10,gram:6,protein:0,fat:0,carb:2}]));X.subscribe((t=>W(t,"itemDb")));const Q=J(X,(t=>{const e={};for(let n of t)e[n.name]=n;return e})),R=G(q("activeItems",[]));R.subscribe((t=>W(t,"activeItems")));const U=J([Q,R],(([t,e])=>{console.log("totalstats",t,e);return e.reduce(((e,n)=>{const{name:r,amt:o}=n;if(!t[r])return e;const l=t[r],c=Number(o)/l.gram;return{cal:e.cal+l.cal*c,protein:e.protein+l.protein*c,fat:e.fat+l.fat*c,carb:e.carb+l.carb*c}}),{cal:0,gram:0,protein:0,fat:0,carb:0})}));function V(t,e,n){const r=t.slice();return r[2]=e[n],r}function Y(t,e,n){const r=t.slice();return r[5]=e[n],r}function Z(t){let e,n,r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"";return{c(){e=d("th"),n=h(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){1&e&&r!==(r=(t[2][t[5]]?(t[2][t[5]]/t[2].gram).toFixed(3):"--")+"")&&$(n,r)},d(t){t&&u(e)}}}function tt(t){let e,n,r,o,l,c,a,p,g=t[2].desc+"",b=(t[2].cal/t[2].gram).toFixed(3)+"",y=t[1],x=[];for(let e=0;e<y.length;e+=1)x[e]=Z(Y(t,y,e));return{c(){e=d("tr"),n=d("th"),r=h(g),o=m(),l=d("th"),c=h(b),a=m();for(let t=0;t<x.length;t+=1)x[t].c();p=m()},m(t,u){i(t,e,u),s(e,n),s(n,r),s(e,o),s(e,l),s(l,c),s(e,a);for(let t=0;t<x.length;t+=1)x[t].m(e,null);s(e,p)},p(t,n){if(1&n&&g!==(g=t[2].desc+"")&&$(r,g),1&n&&b!==(b=(t[2].cal/t[2].gram).toFixed(3)+"")&&$(c,b),3&n){let r;for(y=t[1],r=0;r<y.length;r+=1){const o=Y(t,y,r);x[r]?x[r].p(o,n):(x[r]=Z(o),x[r].c(),x[r].m(e,p))}for(;r<x.length;r+=1)x[r].d(1);x.length=y.length}},d(t){t&&u(e),f(x,t)}}}function et(e){let n,r,o,l,c=e[0],a=[];for(let t=0;t<c.length;t+=1)a[t]=tt(V(e,c,t));return{c(){n=d("table"),r=d("thead"),r.innerHTML="<tr><th>Name</th> \n            <th>Cals / g</th> \n            <th>Protein (g)</th> \n            <th>Fat (g)</th> \n            <th>Carbs (g)</th></tr>",o=m(),l=d("tbody");for(let t=0;t<a.length;t+=1)a[t].c();g(n,"class","table table-striped")},m(t,e){i(t,n,e),s(n,r),s(n,o),s(n,l);for(let t=0;t<a.length;t+=1)a[t].m(l,null)},p(t,[e]){if(3&e){let n;for(c=t[0],n=0;n<c.length;n+=1){const r=V(t,c,n);a[n]?a[n].p(r,e):(a[n]=tt(r),a[n].c(),a[n].m(l,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=c.length}},i:t,o:t,d(t){t&&u(n),f(a,t)}}}function nt(t,e,n){let r;a(t,X,(t=>n(0,r=t)));return[r,["protein","fat","carb"]]}class rt extends M{constructor(t){super(),K(this,t,nt,et,l,{})}}function ot(t,e,n){const r=t.slice();return r[11]=e[n],r}function lt(t){let e,n=t[4],r=[];for(let e=0;e<n.length;e+=1)r[e]=ct(ot(t,n,e));return{c(){e=d("ul");for(let t=0;t<r.length;t+=1)r[t].c();g(e,"class","list-group opts svelte-wwylds")},m(t,n){i(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(30&o){let l;for(n=t[4],l=0;l<n.length;l+=1){const c=ot(t,n,l);r[l]?r[l].p(c,o):(r[l]=ct(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(t){t&&u(e),f(r,t)}}}function ct(t){let e,n,r,o,l=t[11].text+"";function c(){return t[8](t[11])}return{c(){e=d("li"),n=h(l),g(e,"class","list-group-item")},m(t,l){i(t,e,l),s(e,n),r||(o=p(e,"click",c),r=!0)},p(e,r){t=e,16&r&&l!==(l=t[11].text+"")&&$(n,l)},d(t){t&&u(e),r=!1,o()}}}function at(e){let n,l,c,a,f,h=e[3]&&lt(e);return{c(){n=d("div"),l=d("input"),c=m(),h&&h.c(),g(l,"type","text"),g(l,"class","form-control"),g(l,"placeholder",e[0])},m(t,r){i(t,n,r),s(n,l),y(l,e[2]),s(n,c),h&&h.m(n,null),a||(f=[p(l,"input",e[6]),p(l,"focus",e[7]),p(l,"change",(function(){o(e[1](e[2]))&&e[1](e[2]).apply(this,arguments)})),p(n,"blur",e[9]),p(n,"focus",e[10])],a=!0)},p(t,[r]){e=t,1&r&&g(l,"placeholder",e[0]),4&r&&l.value!==e[2]&&y(l,e[2]),e[3]?h?h.p(e,r):(h=lt(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:t,o:t,d(t){t&&u(n),h&&h.d(),a=!1,r(f)}}}function st(t,e,n){let r,{placeholder:o}=e,{allOpts:l}=e,{onChange:c}=e,a="",s=!1;return t.$$set=t=>{"placeholder"in t&&n(0,o=t.placeholder),"allOpts"in t&&n(5,l=t.allOpts),"onChange"in t&&n(1,c=t.onChange)},t.$$.update=()=>{36&t.$$.dirty&&n(4,r=l.filter((t=>t.name.toLowerCase().includes(a.toLowerCase()))))},[o,c,a,s,r,l,function(){a=this.value,n(2,a)},()=>n(3,s=!0),t=>{c(t.name),n(2,a=t.name),n(3,s=!1)},()=>n(3,s=!1),()=>n(3,s=!0)]}class it extends M{constructor(t){super(),K(this,t,st,at,l,{placeholder:0,allOpts:5,onChange:1})}}function ut(t,e,n){const r=t.slice();return r[16]=e[n],r}function ft(t,e,n){const r=t.slice();return r[16]=e[n],r}function dt(t){let e,n,r,o,l,c,a,f,b,y=t[16].name+"",x=t[16].amt+"";function v(){return t[14](t[16])}return{c(){e=d("li"),n=d("button"),n.textContent="X",r=m(),o=h(y),l=h(" ("),c=h(x),a=h(" g) "),g(n,"class","btn btn-danger"),g(e,"class","list-group-item")},m(t,u){i(t,e,u),s(e,n),s(e,r),s(e,o),s(e,l),s(e,c),s(e,a),f||(b=p(n,"click",v),f=!0)},p(e,n){t=e,32&n&&y!==(y=t[16].name+"")&&$(o,y),32&n&&x!==(x=t[16].amt+"")&&$(c,x)},d(t){t&&u(e),f=!1,b()}}}function ht(t){let e,n,r=(t[1][t[16]]?t[1][t[16]].toFixed(3):"N/A")+"";return{c(){e=d("th"),n=h(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){2&e&&r!==(r=(t[1][t[16]]?t[1][t[16]].toFixed(3):"N/A")+"")&&$(n,r)},d(t){t&&u(e)}}}function mt(t){let e,n,o,l,c,a,h,$,x,v,w,C,_,k,O,A,N,S,E,F,L,T,H,K,M,D,G,J,q,W,X,Q,R,U,V,Y;h=new it({props:{placeholder:"Ingredient",allOpts:t[4],onChange:t[12]}});let Z=t[5],tt=[];for(let e=0;e<Z.length;e+=1)tt[e]=dt(ft(t,Z,e));let et=t[6],nt=[];for(let e=0;e<et.length;e+=1)nt[e]=ht(ut(t,et,e));return{c(){e=d("div"),n=d("div"),o=d("h5"),o.textContent="Add ingredients + weight",l=m(),c=d("div"),a=d("div"),j(h.$$.fragment),$=m(),x=d("div"),v=d("input"),w=m(),C=d("div"),_=d("button"),_.textContent="Add",k=m(),O=d("div"),A=d("div"),N=d("ul");for(let t=0;t<tt.length;t+=1)tt[t].c();S=m(),E=d("div"),F=d("div"),L=d("div"),T=d("div"),H=d("h5"),H.textContent="Current stats:",K=m(),M=d("h6"),M.textContent="Set total weight",D=m(),G=d("input"),J=m(),q=d("table"),W=d("thead"),W.innerHTML="<tr><th>Cals / g</th> \n                            <th>Protein (g)</th> \n                            <th>Fat (g)</th> \n                            <th>Carbs (g)</th></tr>",X=m(),Q=d("tbody"),R=d("tr");for(let t=0;t<nt.length;t+=1)nt[t].c();g(o,"class","card-header"),g(a,"class","col-lg-4"),g(v,"type","number"),g(v,"class","form-control"),g(v,"placeholder","Amount, g"),g(x,"class","col-lg-2"),g(_,"type","button"),g(_,"class","btn btn-primary"),g(C,"class","col-lg-2"),g(c,"class","row"),g(n,"class","card-body"),g(N,"class","list-group opts"),g(A,"class","col"),g(O,"class","row"),g(e,"class","card"),g(H,"class","card-header"),g(G,"type","number"),g(G,"class","form-control"),g(G,"placeholder","Total dish amount, g"),g(q,"class","table table-striped"),g(T,"class","col"),g(L,"class","row"),g(F,"class","card-body"),g(E,"class","card")},m(r,u){i(r,e,u),s(e,n),s(n,o),s(n,l),s(n,c),s(c,a),z(h,a,null),s(c,$),s(c,x),s(x,v),y(v,t[2]),s(c,w),s(c,C),s(C,_),s(e,k),s(e,O),s(O,A),s(A,N);for(let t=0;t<tt.length;t+=1)tt[t].m(N,null);i(r,S,u),i(r,E,u),s(E,F),s(F,L),s(L,T),s(T,H),s(T,K),s(T,M),s(T,D),s(T,G),y(G,t[0]),s(T,J),s(T,q),s(q,W),s(q,X),s(q,Q),s(Q,R);for(let t=0;t<nt.length;t+=1)nt[t].m(R,null);U=!0,V||(Y=[p(v,"input",t[13]),p(_,"click",t[7]),p(G,"input",t[15])],V=!0)},p(t,[e]){const n={};if(16&e&&(n.allOpts=t[4]),8&e&&(n.onChange=t[12]),h.$set(n),4&e&&b(v.value)!==t[2]&&y(v,t[2]),288&e){let n;for(Z=t[5],n=0;n<Z.length;n+=1){const r=ft(t,Z,n);tt[n]?tt[n].p(r,e):(tt[n]=dt(r),tt[n].c(),tt[n].m(N,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Z.length}if(1&e&&b(G.value)!==t[0]&&y(G,t[0]),66&e){let n;for(et=t[6],n=0;n<et.length;n+=1){const r=ut(t,et,n);nt[n]?nt[n].p(r,e):(nt[n]=ht(r),nt[n].c(),nt[n].m(R,null))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}},i(t){U||(I(h.$$.fragment,t),U=!0)},o(t){P(h.$$.fragment,t),U=!1},d(t){t&&u(e),B(h),f(tt,t),t&&u(S),t&&u(E),f(nt,t),V=!1,r(Y)}}}function pt(t,e,n){let r,o,l,c,s,i;a(t,U,(t=>n(10,c=t))),a(t,X,(t=>n(11,s=t))),a(t,R,(t=>n(5,i=t)));let u="",f="",d=0;function h(t){R.update((e=>{const n=[...e],r=n.map((t=>t.name)).indexOf(t);return n.splice(r,1),n}))}return t.$$.update=()=>{2048&t.$$.dirty&&n(4,r=s.map((t=>({name:t.name,text:t.desc})))),1&t.$$.dirty&&n(9,o=Number(d)),1536&t.$$.dirty&&n(1,l={cal:c.cal/o,protein:c.protein/o,fat:c.fat/o,carb:c.carb/o}),1538&t.$$.dirty&&console.log(o,l,c)},[d,l,u,f,r,i,["cal","protein","fat","carb"],function(){u&&f&&(R.update((t=>t.concat({name:f,amt:u}))),n(2,u=""))},h,o,c,s,t=>{n(3,f=t)},function(){u=b(this.value),n(2,u)},t=>h(t.name),function(){d=b(this.value),n(0,d)}]}class gt extends M{constructor(t){super(),K(this,t,pt,mt,l,{})}}function bt(e){let n,r,o,l,c,a,f,h,p,g,b;return r=new gt({}),g=new rt({}),{c(){n=d("main"),j(r.$$.fragment),o=m(),l=d("br"),c=m(),a=d("hr"),f=m(),h=d("br"),p=m(),j(g.$$.fragment)},m(t,e){i(t,n,e),z(r,n,null),s(n,o),s(n,l),s(n,c),s(n,a),s(n,f),s(n,h),s(n,p),z(g,n,null),b=!0},p:t,i(t){b||(I(r.$$.fragment,t),I(g.$$.fragment,t),b=!0)},o(t){P(r.$$.fragment,t),P(g.$$.fragment,t),b=!1},d(t){t&&u(n),B(r),B(g)}}}return new class extends M{constructor(t){super(),K(this,t,null,bt,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
